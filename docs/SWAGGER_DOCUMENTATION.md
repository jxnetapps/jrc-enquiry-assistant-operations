# 📚 Swagger API Documentation Guide

## 🌐 Accessing Swagger Documentation

Your Web ChatBot Enhanced API comes with comprehensive Swagger documentation that's automatically generated by FastAPI.

### 📍 **Documentation URLs**

| Documentation Type | URL | Description |
|-------------------|-----|-------------|
| **Swagger UI** | `http://localhost:8000/docs` | Interactive API documentation with testing capabilities |
| **ReDoc** | `http://localhost:8000/redoc` | Clean, responsive documentation format |
| **OpenAPI JSON** | `http://localhost:8000/openapi.json` | Machine-readable API specification |

### 🚀 **Quick Start with Swagger**

1. **Start the application**:
   ```bash
   python web_app.py
   ```

2. **Open Swagger UI**:
   - Navigate to `http://localhost:8000/docs`
   - Explore the interactive API documentation

3. **Test endpoints directly**:
   - Click on any endpoint to expand it
   - Click "Try it out" to test the endpoint
   - Fill in parameters and click "Execute"

## 📋 **API Categories in Swagger**

### 1. **General** 🏠
- `GET /` - API Root - Welcome message and basic info
- `GET /health` - Health Check - System health status
- `GET /api/info` - API Information - Detailed API capabilities
- `GET /web` - Web Interface - Access the chat interface

### 2. **Authentication** 🔐
- `POST /api/auth/login` - User Login
- `POST /api/auth/register` - User Registration
- `POST /api/auth/refresh` - Refresh Token
- `GET /api/auth/me` - Get Current User
- `POST /api/auth/logout` - User Logout

### 3. **Vector Chat** 🤖
- `POST /api/vector-chat/chat` - Send Chat Message
- `POST /api/vector-chat/crawl` - Crawl Website
- `GET /api/vector-chat/status` - Chat Status
- `POST /api/vector-chat/upload` - Upload Document

### 4. **Chat Inquiry** 📝
#### Public Endpoints (No Authentication)
- `POST /api/chat-inquiry/public` - Create Inquiry (Public)
- `GET /api/chat-inquiry/public/{id}` - Get Inquiry by ID (Public)
- `GET /api/chat-inquiry/public` - List Inquiries (Public)

#### Admin Endpoints (JWT Required)
- `POST /api/chat-inquiry` - Create Inquiry (Admin)
- `GET /api/chat-inquiry/{id}` - Get Inquiry by ID (Admin)
- `PUT /api/chat-inquiry/{id}` - Update Inquiry (Admin)
- `DELETE /api/chat-inquiry/{id}` - Delete Inquiry (Admin)
- `GET /api/chat-inquiry` - List Inquiries (Admin)
- `GET /api/chat-inquiry/stats` - Get Statistics (Admin)
- `GET /api/chat-inquiry/by-email/{email}` - Get by Email (Admin)
- `GET /api/chat-inquiry/by-mobile/{mobile}` - Get by Mobile (Admin)
- `GET /api/chat-inquiry/by-parent-type/{type}` - Get by Parent Type (Admin)
- `GET /api/chat-inquiry/by-school-type/{type}` - Get by School Type (Admin)
- `GET /api/chat-inquiry/user/{user_id}` - Get by User ID (Admin)

### 5. **Database** 🗄️
- `GET /api/chat-inquiry/database/status` - Database Status
- `POST /api/chat-inquiry/database/test-postgres` - Test PostgreSQL
- `POST /api/chat-inquiry/database/export-sqlite` - Export SQLite to PostgreSQL
- `GET /api/chat-inquiry/database/export-status` - Export Status

## 🔧 **Swagger Features**

### **Interactive Testing**
- Test all endpoints directly from the browser
- No need for external tools like Postman
- Real-time request/response testing

### **Authentication Support**
- JWT Bearer token authentication
- "Authorize" button in Swagger UI
- Automatic token inclusion in requests

### **Request/Response Examples**
- Sample request bodies
- Example responses
- Error response formats

### **Schema Documentation**
- Complete data models
- Field descriptions and types
- Validation rules

## 🎯 **Using Swagger UI**

### **1. Authentication Setup**
1. Click the "Authorize" button (🔒) in Swagger UI
2. Enter your JWT token in the format: `Bearer your-jwt-token-here`
3. Click "Authorize"
4. Now you can test protected endpoints

### **2. Testing Endpoints**
1. Find the endpoint you want to test
2. Click on it to expand the details
3. Click "Try it out"
4. Fill in the required parameters
5. Click "Execute"
6. View the response

### **3. Understanding Responses**
- **200**: Success
- **201**: Created
- **400**: Bad Request
- **401**: Unauthorized
- **403**: Forbidden
- **404**: Not Found
- **500**: Internal Server Error

## 📊 **API Response Format**

All API responses follow a consistent format:

```json
{
  "success": true,
  "data": { ... },
  "message": "Operation successful",
  "pagination": {
    "page": 1,
    "page_size": 10,
    "total": 100,
    "pages": 10
  }
}
```

## 🔍 **Search and Filter**

### **In Swagger UI:**
- Use the search box to find specific endpoints
- Filter by tags (Authentication, Vector Chat, etc.)
- Expand/collapse sections for better navigation

### **In ReDoc:**
- Use Ctrl+F to search
- Navigate using the table of contents
- Clean, readable format

## 📱 **Mobile-Friendly**

Both Swagger UI and ReDoc are mobile-responsive:
- Works on tablets and phones
- Touch-friendly interface
- Optimized for small screens

## 🛠️ **Customization**

### **Adding Custom Documentation**
You can enhance the Swagger documentation by:

1. **Adding descriptions to endpoints**:
   ```python
   @app.get("/endpoint", summary="Brief description", description="Detailed description")
   ```

2. **Adding examples**:
   ```python
   @app.get("/endpoint", response_model=Model, responses={200: {"description": "Success", "content": {"application/json": {"example": {"key": "value"}}}}})
   ```

3. **Adding tags**:
   ```python
   @app.get("/endpoint", tags=["Custom Tag"])
   ```

## 🚀 **Best Practices**

### **For Developers:**
1. Always check the Swagger documentation before implementing
2. Use the interactive testing to verify endpoints
3. Test both success and error scenarios
4. Verify authentication requirements

### **For API Consumers:**
1. Start with the root endpoint (`/`) to understand the API
2. Check the health endpoint (`/health`) to verify connectivity
3. Use public endpoints for basic operations
4. Implement authentication for admin operations

## 📚 **Additional Resources**

- **OpenAPI Specification**: `http://localhost:8000/openapi.json`
- **API Quick Reference**: See `docs/API_QUICK_REFERENCE.md`
- **Unified API Guide**: See `docs/UNIFIED_API_GUIDE.md`
- **Installation Guide**: See `docs/INSTALLATION.md`

## 🎉 **Getting Started**

1. **Start the application**:
   ```bash
   python web_app.py
   ```

2. **Open Swagger UI**:
   ```
   http://localhost:8000/docs
   ```

3. **Test the health endpoint**:
   - Find "General" section
   - Click on "Health Check"
   - Click "Try it out"
   - Click "Execute"

4. **Explore the API**:
   - Browse different categories
   - Test various endpoints
   - Check response formats

Your comprehensive Swagger documentation is now ready! 🎉
