# Azure App Service Environment Configuration
# This configuration is optimized for Azure App Service deployment

# =============================================================================
# ENVIRONMENT IDENTIFICATION
# =============================================================================
ENVIRONMENT=production
DEBUG=false

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database Type: 'local' for FAISS, 'cloud' for Chroma Cloud
DATABASE_TYPE=cloud

# Local Database Configuration (FAISS) - fallback
CHROMA_DB_PATH=/home/site/wwwroot/chroma_db
COLLECTION_NAME=web_content

# Chroma Cloud Configuration (Azure production)
CHROMA_CLOUD_API_KEY=${CHROMA_CLOUD_API_KEY}
CHROMA_CLOUD_TENANT_ID=${CHROMA_CLOUD_TENANT_ID}
CHROMA_CLOUD_DATABASE_ID=${CHROMA_CLOUD_DATABASE_ID}
CHROMA_CLOUD_COLLECTION_NAME=web_content

# =============================================================================
# CHAT BEHAVIOR CONFIGURATION
# =============================================================================

# Chat Behavior: 'knowledge_base' or 'pre_trained'
CHAT_BEHAVIOR=knowledge_base

# =============================================================================
# ANSWER STORAGE CONFIGURATION
# =============================================================================

# Answer Storage Type: 'sqlite', 'mysql', or 'mssql'
ANSWER_STORAGE_TYPE=postgresql

# =============================================================================
# OPENAI CONFIGURATION
# =============================================================================

# OpenAI API Key (Azure App Settings)
OPENAI_API_KEY=${OPENAI_API_KEY}

# OpenAI Models
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
LLM_MODEL=gpt-4
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2000

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================

# Local embedding model (fallback)
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_BATCH_SIZE=64

# =============================================================================
# CRAWLING CONFIGURATION
# =============================================================================

# Crawling settings (Azure optimized)
MAX_PAGES_TO_CRAWL=500
CRAWL_DEPTH=5
CRAWL_DELAY=2.0
MAX_CONCURRENT_REQUESTS=10
USER_AGENT=WebChatBot-Azure/2.0

# Content filtering
MIN_CONTENT_LENGTH=200
MAX_CONTENT_LENGTH=15000
CONTENT_QUALITY_THRESHOLD=0.7

# =============================================================================
# CHAT CONFIGURATION
# =============================================================================

# Similarity search settings
SIMILARITY_THRESHOLD=0.4
MAX_CONTEXT_LENGTH=6000
TOP_K_RESULTS=8

# =============================================================================
# SCHEDULING CONFIGURATION
# =============================================================================

# Enable/disable scheduled crawling
SCHEDULE_CRAWL=true
CRAWL_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# JWT Secret (Azure App Settings)
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_HOURS=8

# Default user credentials (Azure App Settings)
ADMIN_USERNAME=${ADMIN_USERNAME}
ADMIN_PASSWORD=${ADMIN_PASSWORD}
DEFAULT_USER_STATUS=active

# Auth mode: disabled in production
ALLOW_ANY_USER=false

# =============================================================================
# POSTGRESQL CONFIGURATION
# =============================================================================

# PostgreSQL Configuration (Azure Database for PostgreSQL)
POSTGRESQL_CONNECTION_URI=${POSTGRESQL_CONNECTION_URI}
POSTGRESQL_DATABASE_NAME=${POSTGRESQL_DATABASE_NAME}
POSTGRESQL_CHAT_INQUIRY_TABLE=chat_inquiry_information

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server settings (Azure App Service)
HOST=0.0.0.0
PORT=8000
DEBUG=false

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Rate limiting settings (strict for production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=3600

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# POSTGRESQL CONFIGURATION
# =============================================================================

# PostgreSQL Configuration (Azure Database for PostgreSQL)
POSTGRESQL_CONNECTION_URI=${POSTGRESQL_CONNECTION_URI}
POSTGRESQL_DATABASE_NAME=${POSTGRESQL_DATABASE_NAME}
POSTGRESQL_CHAT_INQUIRY_TABLE=chat_inquiry_information

# =============================================================================
# AZURE SPECIFIC CONFIGURATION
# =============================================================================

# Azure App Service settings
WEBSITES_ENABLE_APP_SERVICE_STORAGE=true
WEBSITES_PORT=8000
SCM_DO_BUILD_DURING_DEPLOYMENT=true

# Azure Storage (if using)
AZURE_STORAGE_ACCOUNT_NAME=${AZURE_STORAGE_ACCOUNT_NAME}
AZURE_STORAGE_ACCOUNT_KEY=${AZURE_STORAGE_ACCOUNT_KEY}
AZURE_STORAGE_CONTAINER_NAME=webchatbot

# Azure Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=${APPLICATIONINSIGHTS_CONNECTION_STRING}
